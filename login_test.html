<!DOCTYPE html>
<html>
<head>
    <title>Login Test</title>
    <script>
        // First verify handleLogin exists in global scope
        console.log("Before loading auth_debug_v4.js - handleLogin exists:", typeof handleLogin !== 'undefined');
    </script>
    <script src="auth_debug_v4.js"></script>
    <script>
        // Verify after loading
        console.log("After loading auth_debug_v4.js - handleLogin exists:", typeof handleLogin !== 'undefined');
    </script>
</head>
<body>
    <form id="testForm">
        <input type="text" id="testUsername" placeholder="Username">
        <input type="password" id="testPassword" placeholder="Password">
        <button type="submit">Submit</button>
    </form>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('testForm');
            
            // Verify form exists
            console.log("Form element:", form);
            
            // Verify form exists
            console.log("Form element:", form);
            
            // Add direct onclick handler to the form itself
            form.onclick = function(e) {
                console.log("===== FORM CLICK EVENT =====");
                console.log("Clicked element:", e.target);
                if (e.target.tagName === 'BUTTON' && e.target.type === 'submit') {
                    console.log("Submit button clicked directly");
                    e.preventDefault();
                    handleLogin({
                        type: 'submit',
                        target: form,
                        preventDefault: () => console.log("Default prevented")
                    });
                }
            };

            // Add onsubmit handler directly
            form.onsubmit = function(e) {
                console.log("===== FORM SUBMIT EVENT =====");
                e.preventDefault();
                handleLogin(e);
            };
        });
    </script>
</body>
</html>
